\documentclass{scrartcl}

% configuration lifted from chez-sty at https://github.com/chezbgone/chez-sty
\KOMAoptions{paper=letter, fontsize=10pt, usegeometry}

% standard
\usepackage{mathtools, amssymb, amsthm}
\usepackage[shortlabels, inline]{enumitem}

% layout
\usepackage[margin=1.5cm, includefoot]{geometry}
\usepackage[nodisplayskipstretch, onehalfspacing]{setspace}
% section numbers in margin
\RenewDocumentCommand{\sectionlinesformat}{m m m m}{\makebox[0pt][r]{#3}#4}

% typography
\usepackage{libertine, microtype}
\usepackage[shortlabels, inline]{enumitem}

% smaller title style
\makeatletter \patchcmd{\@maketitle}{\huge}{\large}{}{} \makeatother
\setkomafont{author}{\normalsize\scshape}
\setkomafont{date}{\normalsize}
\RedeclareSectionCommand[beforeskip=0.4\baselineskip]{paragraph}

% % % % % % % % % % % % % % % % % % % % %
% actual content

\title{Schedgehog: a property-based testing library}
\author{Jason Chen \and CJ Quines \and Matthew Ho}

\begin{document}
\maketitle

\section{Overview}

In software engineering, testing code is considered to be a vital part of
delivering quality software. However, writing unit tests is extremely time
consuming, and it is easy for the programmer to miss certain cases for more
complicated functions. Therefore, it is desirable to try to automate this
processes either partially, or entirely.

We present a tool called \textbf{Schedgehog}, based on existing Haskell work
like QuickCheck \cite{quickcheck} or Hedgehog \cite{hedgehog}, that allows
users to formulate properties of programs and then automatically runs tests
based on the properties. Properties that users want to test will be specified
via a DSL embedded in Scheme; these are represented as functions along with
typing information.

Test data is generated based on this typing information. Schedgehog's generators
are generic functions that satisfy two main properties:

\begin{itemize}
\item \textit{generator derivation}, which allows automatically generating new
types by using combinators over existing generators, and,
\item \textit{test shrinking}, which allows automatically simplifying failing
counterexamples, via a built-in user-extensible rule-based system.
\end{itemize}

\section{Basic usage}

Properties are specified with the macro \verb|forall|. Properties are functions
with typed arguments that return a boolean.

\begin{verbatim}
(define prop:addition-commutativity
  (forall ((x integer) (y integer))
          (= (+ x y) (+ y x))))
\end{verbatim}

Primitive types include \verb|integer|, \verb|boolean|, and \verb|float|. A full
list of built-in primitive types are in \verb|src/generator-instances.scm|.
There are also dependent types, like \verb|linear| or \verb|range|, that take
in other arguments.

\begin{verbatim}
(define prop:addition-bounds
  (forall ((x range 10 30) (y range 10 30))
          (< 20 (+ x y) 60)))
\end{verbatim}

These types can be combined with type constructors to produce more complex
types. Some examples of type constructors include \verb|pair| and \verb|list|.

\begin{verbatim}
(define prop:sum-linear
  (forall ((xs (list integer)) (factor integer))
          (equal? (* factor (apply + xs))
                  (apply + (map (lambda (x) (* factor x)) xs)))))
\end{verbatim}

The main interface for checking a property is with the function \verb|check|.
This runs the function against several random test cases. It then prints
the result of the test, along with a counterexample if found.

\begin{verbatim}
(check prop:addition-commutativity)
; seed: ...
; ok 100 tests
(check prop:addition-bounds)
; seed: ...
; failed after 73 tests, 2 shrinks:
; ((x 10) (y 10))
\end{verbatim}

\section{Generators}

% talk about types
% talk about generics idk
% talk about custom generators
% talk about distributions

\section{Shrinkers}

% talk about shrinkers
% talk about the lazy tree and how implementation can be swapped

\section{Combinators}

% talk about combinators

\section{Extensions}

% idk

\begin{thebibliography}{99}

\bibitem{quickcheck}
Claessen, K., \& Hughes, J. (2011). QuickCheck: a lightweight tool for random
testing of Haskell programs. \textit{ACM SigPlan Notices}, 46(4), 53-64.

\bibitem{hedgehog}
Hedgehog QA. (2019). Hedgehog will eat all your bugs. Retrieved from
\url{https://hedgehog.qa/}.

\end{thebibliography}

\end{document}
